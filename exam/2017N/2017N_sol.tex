{
\renewcommand{\thechapter}{\arabic{chapter}N}
\renewcommand{\thesubsection}{\thesection\alph{subsection}}
\setcounter{chapter}{16}
\chapter{Exam normal 2016/17}

\section{Question 1}
In a library, you intend to organize a set of $n$ books into shelves. The books' relative order has been predetermined by the librarian and can't be changed. A book $i$ is characterized by its width $L_i$ and height $A_i$. The length of each shelf is $L_P$. The shelves' heights are adjustable, where the height of each shelf is the height of the tallest book. The cost of a particular arrangement is the sum of the heights of all shelves. The intention is to determine the arrangement that minimizes cost.

\subsection{Item a}
Implement (in C++ or pseudocode) a solution for the problem, using a greedy algorithm. Discuss its optimality and mention its time complexity. Justify.

\ansseparator

\lstinputlisting[language=C++]{2017N_01a.cpp}

This algorithm is not optimal, and this can be proven by a simple example, to which we will find the solution given by the algorithm and then describe a better solution: consider $L_P=2$, $L=\langle 1, 1, 1 \rangle$ and $A = \langle 1, 2, 2 \rangle$. The greedy algorithm would result in the arrangement $shelf=\langle 0, 0, 1 \rangle$ where both shelfs 0 and 1 have height 2, amounting to a total height of 4. However there is a solution $shelf = \langle 0, 1, 1 \rangle$ where shelf 0 has height 1 and shelf 1 has height 2, amounting to a total height of 3. This means there is a better solution that the greedy algorithm has not found, thus it is not optimal

Its time complexity is $O(n)$, since there is only one \textbf{for} loop (with no nested \textbf{for} loops) where all operations are elementary (thus $O(1)$).

\subsection{Item b}
To describe a solution, we need only two variables:
\begin{itemize}
    \item How many books we have placed so far, $i$
    \item The free width of the current shelf, $w$
\end{itemize}
For each solution we save three pieces of information:
\begin{itemize}
    \item The height of the current shelf, $h$
    \item The total height of the arrangement, excluding the current shelf, $H$
    \item The keys of the previous solution, $(i, w)$
\end{itemize}
The base case is $S_0^0 = (h=0, H=0)$.\\
For each solution $S_i^w$ we can construct two more solutions:
\begin{itemize}
    \item If the shelf still has space (if $w + L_i \leq L_P$), $S_{i+1}^{w+L_i}$ can be $(h' = \max\{h, A_i\}, H'=H)$.
    \item If we decide to put the book in the next shelf, $S_{i+1}^{L_i}$ can be $(h' = A_i, H' = H+h)$.
\end{itemize}
The final solution is
\begin{equation*}
    \min_{0 \leq w \leq L_P}\{S_n^w.H+S_n^w.h\}
\end{equation*}
and the corresponding arrangement can be extracted by traversing the previous solutions.

Its time complexity is $O(n \cdot L_P)$, since there are $n \cdot L_P$ possibly different states, and the processing of one state improves two other solutions in time $O(1)$.

\newpage
\lstinputlisting[language=C++]{2017N_01b.cpp}

\section{Question 2}
Considering graph paths problems, answer the following items. When describing algorithms use pseudocode or C++.

\subsection{Item a}
Consider the undirected graph in the figure. We want to determine the shortest paths, with origin $A$, generated by applying Dijkstra's algorithm. Show the values of distances of each vertex as they are processed. What is the shortest path from $A$ to $F$?

\ansseparator

Below is a trace of variables used in Dijkstra's algorithm.

\begin{center} \begin{tabular}{r | l l c}
    \textbf{Line} & \textbf{dist} & \textbf{Q} & \textbf{u}\\ \hline
    3             & $\langle \infty, \infty, \infty, \infty, \infty, \infty, \infty \rangle$ & $\{A,B,C,D,E,F,G\}$ & - \\
    4             & $\langle 0, \infty, \infty, \infty, \infty, \infty, \infty \rangle$ & $\{A,B,C,D,E,F,G\}$ & - \\
    5             & $\langle 0, \infty, \infty, \infty, \infty, \infty, \infty \rangle$ & $\{A,B,C,D,E,F,G\}$ & - \\
    8             & $\langle 0, \infty, \infty, \infty, \infty, \infty, \infty \rangle$ & $\{B,C,D,E,F,G\}$ & $A$ \\
    5             & $\langle 0, 1, 3, \infty, \infty, 10, \infty \rangle$ & $\{B,C,D,E,F,G\}$ & $A$ \\
    8             & $\langle 0, 1, 3, \infty, \infty, 10, \infty \rangle$ & $\{C,D,E,F,G\}$ & $B$ \\
    5             & $\langle 0, 1, 2, 8, 6, 10, 3 \rangle$ & $\{C,D,E,F,G\}$ & $B$ \\
    8             & $\langle 0, 1, 2, 8, 6, 10, 3 \rangle$ & $\{D,E,F,G\}$ & $C$ \\
    5             & $\langle 0, 1, 2, 8, 5, 10, 3 \rangle$ & $\{D,E,F,G\}$ & $C$ \\
    8             & $\langle 0, 1, 2, 8, 5, 10, 3 \rangle$ & $\{D,E,F\}$ & $G$ \\
    5             & $\langle 0, 1, 2, 8, 5, 10, 3 \rangle$ & $\{D,E,F\}$ & $G$ \\
    8             & $\langle 0, 1, 2, 8, 5, 10, 3 \rangle$ & $\{D,F\}$ & $E$ \\
    5             & $\langle 0, 1, 2, 7, 5, 7, 3 \rangle$ & $\{D,F\}$ & $E$ \\
    8             & $\langle 0, 1, 2, 7, 5, 7, 3 \rangle$ & $\{F\}$ & $D$ \\
    5             & $\langle 0, 1, 2, 7, 5, 7, 3 \rangle$ & $\{F\}$ & $D$ \\
    8             & $\langle 0, 1, 2, 7, 5, 7, 3 \rangle$ & $\{\}$ & $F$ \\
    5             & $\langle 0, 1, 2, 7, 5, 7, 3 \rangle$ & $\{\}$ & $F$ \\
    12            & $\langle 0, 1, 2, 7, 5, 7, 3 \rangle$ & $\{\}$ & -
\end{tabular} \end{center}

The shortest path from $A$ to $F$ is $A \rightarrow B \rightarrow C \rightarrow E \rightarrow F$, with a total cost of 7.

\subsection{Item b}
Present an efficient algorithm that, given a DAG (directed acyclic graph) with positive edges and vertices $v_i$, $v_f$ abd $v_k$ of that graph, finds the shortest path from $v_i$ to $v_f$ going through $v_k$. Suggestion: change Dijkstra's algorithm.

\ansseparator



}
